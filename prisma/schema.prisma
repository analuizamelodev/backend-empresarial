generator client {
  provider   = "prisma-client"
  output     = "./generated"
}

datasource db {
  provider = "postgresql"
}

model User {
  id        String  @id @default(uuid())
  name      String
  email     String  @unique
  password  String
}

model Product {
  id          String    @id @default(uuid())
  name        String
  category    String
  pricePurchase Float
  priceSale  Float
  validity    DateTime?
  stock     Stock?
}

model Stock {
  id         String                @id @default(uuid())
  quantity   Int                   @default(0)
  productId  String                @unique
  product    Product               @relation(fields: [productId], references: [id])
  movements  StockMovement[]
}

model StockMovement {
  id         String   @id @default(uuid())
  type       String // COMPRA | VENDA | AJUSTE
  quantity   Int
  date       DateTime @default(now())
  productId  String
  stockId  String
  stock    Stock  @relation(fields: [stockId], references: [id])
}